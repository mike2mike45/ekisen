name: Run ekisen2.html

on:
  push:
    branches:
      - master  # または使用しているデフォルトブランチ名

jobs:
  deploy:
    name: Deploy and Run HTML
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v2

    - name: Setup Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Install http-server
      run: npm install -g http-server

    - name: Run HTML file
      run: |
        http-server . &
        sleep 5
        curl http://localhost:8080/ekisen2.html > output.txt

    - name: Debug
      env:
        API_KEY: ${{ secrets.VUE_APP_C_API_KEY }}
      run: |
        cat output.txt

    - name: Upload artifact
      uses: actions/upload-artifact@v2
      with:
        name: html-output
        path: output.txt
